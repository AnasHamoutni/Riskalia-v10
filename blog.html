<!DOCTYPE html>
<html lang="fr">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1.0" />
    <title>Riskalia â€” Blog & ActualitÃ©s</title>
    <meta
      name="description"
      content="Articles de fond sur la rÃ©assurance, l'assurance et la gestion des risques. ActualitÃ©s rÃ©glementaires et insights du marchÃ©."
    />
    <link rel="apple-touch-icon" sizes="180x180" href="apple-touch-icon.png" />
    <link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png" />
    <link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png" />
    <link rel="manifest" href="site.webmanifest" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700&family=Open+Sans:wght@400;600&family=Tajawal:wght@400;700&display=swap"
      rel="stylesheet"
    />

    <!-- Tailwind CSS -->
    <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>

    <!-- FontAwesome Icons -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />

    <!-- Navigation Component Styles -->
    <link rel="stylesheet" href="assets/css/components/navigation.css" />

    <!-- Footer Component Styles -->
    <link rel="stylesheet" href="assets/css/components/footer.css" />

    <!-- Custom Styles -->
    <link rel="stylesheet" href="assets/css/custom.css" />

    <style>
      :root {
        --c1: #005c73;
        --c2: #00849b;
        --c3: #00b0c8;
        --cl: #fff;
        --cm: #f6fafc;
        --cd: #243238;
      }

      .blog-hero {
        background: linear-gradient(135deg, var(--c1) 0%, var(--c2) 100%);
      }

      .article-card {
        transition: all 0.3s ease;
        border: 1px solid rgba(0, 176, 200, 0.1);
        height: 100%;
        display: flex;
        flex-direction: column;
      }

      .article-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 10px 30px rgba(0, 176, 200, 0.15);
        border-color: var(--c3);
      }

      .article-meta {
        display: flex;
        align-items: center;
        gap: 1rem;
        color: #666;
        font-size: 0.875rem;
        margin-bottom: 1rem;
      }

      .article-meta i {
        color: var(--c3);
      }

      .read-more-btn {
        display: inline-flex;
        align-items: center;
        gap: 0.5rem;
        padding: 10px 20px;
        background: linear-gradient(135deg, var(--c3) 0%, var(--c2) 100%);
        color: white;
        border-radius: 8px;
        text-decoration: none;
        font-weight: 600;
        transition: all 0.3s ease;
        margin-top: auto;
      }

      .read-more-btn:hover {
        transform: translateX(5px);
        box-shadow: 0 5px 15px rgba(0, 176, 200, 0.3);
      }

      .news-item {
        padding: 1rem 1.5rem;
        border-left: 4px solid var(--c3);
        background: linear-gradient(90deg, rgba(0, 176, 200, 0.05) 0%, transparent 100%);
        margin-bottom: 1rem;
        border-radius: 0 8px 8px 0;
        transition: all 0.3s ease;
      }

      .news-item:hover {
        background: linear-gradient(90deg, rgba(0, 176, 200, 0.1) 0%, transparent 100%);
        transform: translateX(5px);
      }

      .section-title {
        display: inline-flex;
        align-items: center;
        gap: 0.5rem;
        font-size: 2rem;
        font-weight: bold;
        margin-bottom: 2rem;
        color: var(--cd);
      }

      .article-excerpt {
        flex-grow: 1;
        line-height: 1.6;
        color: #666;
        margin-bottom: 1.5rem;
      }

      .article-title {
        font-size: 1.25rem;
        font-weight: bold;
        color: var(--cd);
        margin-bottom: 1rem;
        line-height: 1.4;
      }

      /* Modal styles */
      .modal {
        display: none;
        position: fixed;
        z-index: 1000;
        left: 0;
        top: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.8);
        overflow-y: auto;
      }

      .modal.active {
        display: flex;
        align-items: center;
        justify-content: center;
        padding: 2rem;
      }

      .modal-content {
        background: white;
        padding: 3rem;
        border-radius: 16px;
        max-width: 900px;
        width: 100%;
        position: relative;
        box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
      }

      .modal-close {
        position: absolute;
        top: 1.5rem;
        right: 1.5rem;
        font-size: 2rem;
        cursor: pointer;
        color: #666;
        transition: color 0.3s ease;
      }

      .modal-close:hover {
        color: var(--c1);
      }

      .modal-article-title {
        font-size: 2rem;
        font-weight: bold;
        color: var(--cd);
        margin-bottom: 1rem;
        padding-right: 2rem;
      }

      .modal-article-meta {
        display: flex;
        gap: 2rem;
        margin-bottom: 2rem;
        padding-bottom: 1.5rem;
        border-bottom: 2px solid var(--cm);
        color: #666;
      }

      .modal-article-content {
        font-size: 1.1rem;
        line-height: 1.8;
        color: #444;
      }

      @media (max-width: 768px) {
        .modal-content {
          padding: 2rem 1.5rem;
        }

        .modal-article-title {
          font-size: 1.5rem;
        }

        .modal-article-meta {
          flex-direction: column;
          gap: 0.5rem;
        }
      }
    </style>

    <noscript>
      <style>
        .reveal {
          opacity: 1 !important;
          transform: none !important;
        }
      </style>
    </noscript>
  </head>
  <body class="bg-white text-gray-800 overflow-x-hidden">
    <!-- Navigation Component Container -->
    <div id="navigation-container"></div>

    <!-- HERO SECTION -->
    <section
      class="blog-hero min-h-[35vh] flex items-center text-white text-center relative py-16"
    >
      <div class="absolute inset-0 overflow-hidden pointer-events-none">
        <div class="floating-element absolute top-1/4 left-1/4 w-2 h-2 bg-white/20 rounded-full"></div>
        <div class="floating-element absolute top-1/3 right-1/3 w-1 h-1 bg-white/30 rounded-full"></div>
        <div class="floating-element absolute bottom-1/4 right-1/4 w-3 h-3 bg-white/10 rounded-full"></div>
      </div>

      <div class="hero-content container mx-auto px-4 max-w-6xl relative z-10">
        <div class="space-y-6 px-4">
          <h1
            class="text-white text-2xl sm:text-3xl md:text-4xl lg:text-5xl font-bold leading-tight"
            data-i18n="blog.hero.title"
          >
            Blog & ActualitÃ©s
          </h1>
          <p
            class="text-white/90 text-base sm:text-lg md:text-xl max-w-3xl mx-auto"
            data-i18n="blog.hero.subtitle"
          >
            Notre blog vous propose rÃ©guliÃ¨rement des articles Ã  forte valeur ajoutÃ©e pour mieux comprendre les enjeux du marchÃ©
          </p>
        </div>
      </div>
    </section>

    <!-- ARTICLES SECTION -->
    <section class="py-16 bg-white">
      <div class="container mx-auto px-4 max-w-7xl">
        <h2 class="section-title" data-i18n="blog.sections.articles">
          ðŸ“˜ Articles de fond
        </h2>

        <div id="articles-grid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
          <!-- Articles will be rendered here by JavaScript -->
        </div>
      </div>
    </section>

    <!-- NEWS SECTION -->
    <section class="py-16 bg-gray-50">
      <div class="container mx-auto px-4 max-w-6xl">
        <h2 class="section-title" data-i18n="blog.sections.news">
          ðŸ“… ActualitÃ©s
        </h2>

        <div id="news-list" class="max-w-3xl">
          <!-- News items will be rendered here by JavaScript -->
        </div>
      </div>
    </section>

    <!-- ARTICLE MODAL -->
    <div id="article-modal" class="modal">
      <div class="modal-content">
        <span class="modal-close" onclick="closeArticleModal()">&times;</span>
        <h2 id="modal-article-title" class="modal-article-title"></h2>
        <div id="modal-article-meta" class="modal-article-meta"></div>
        <div id="modal-article-content" class="modal-article-content">
          <p>Article content placeholder. In a full implementation, this would contain the complete article text.</p>
        </div>
      </div>
    </div>

    <!-- Footer Component Container -->
    <div id="footer-container"></div>

    <!-- Scripts -->
    <script src="assets/js/i18n.js"></script>
    <script src="assets/js/components/SearchComponent.js"></script>
    <script src="assets/js/components/NavigationComponent.js"></script>
    <script src="assets/js/components/FooterComponent.js"></script>

    <script>
      // Modal functions
      function openArticleModal(articleId) {
        const lang = localStorage.getItem("riskalia_lang") || "fr";
        const article = window.I18N[lang].blog.articles.find(a => a.id === articleId);

        if (!article) return;

        document.getElementById("modal-article-title").textContent = article.title;
        document.getElementById("modal-article-meta").innerHTML = `
          <span><i class="far fa-calendar"></i> ${article.date}</span>
          <span><i class="far fa-clock"></i> ${article.readTime}</span>
        `;

        // In a real implementation, you would load the full article content here
        document.getElementById("modal-article-content").innerHTML = `
          <p style="margin-bottom: 1.5rem; font-size: 1.15rem; color: #666;">${article.excerpt}</p>
          <p style="margin-bottom: 1.5rem;">This is where the full article content would appear. In a complete implementation, you would store the full article text in the i18n.js file or load it from a separate source.</p>
          <p style="margin-bottom: 1.5rem;">The article would contain detailed analysis, expert insights, and comprehensive coverage of the topic.</p>
          <p>For demonstration purposes, this is a placeholder. Each article would have its unique, complete content here.</p>
        `;

        document.getElementById("article-modal").classList.add("active");
        document.body.style.overflow = "hidden";
      }

      function closeArticleModal() {
        document.getElementById("article-modal").classList.remove("active");
        document.body.style.overflow = "auto";
      }

      // Close modal on outside click
      document.getElementById("article-modal").addEventListener("click", function(e) {
        if (e.target === this) {
          closeArticleModal();
        }
      });

      // Close modal on Escape key
      document.addEventListener("keydown", function(e) {
        if (e.key === "Escape") {
          closeArticleModal();
        }
      });

      // Render articles and news
      function renderBlogContent() {
        const lang = localStorage.getItem("riskalia_lang") || "fr";
        if (!window.I18N || !window.I18N[lang] || !window.I18N[lang].blog) return;

        const blogData = window.I18N[lang].blog;
        const articlesGrid = document.getElementById("articles-grid");
        const newsList = document.getElementById("news-list");

        // Render articles
        if (blogData.articles && articlesGrid) {
          articlesGrid.innerHTML = blogData.articles.map(article => `
            <div class="article-card bg-white p-6 rounded-xl">
              <h3 class="article-title">${article.title}</h3>
              <div class="article-meta">
                <span><i class="far fa-calendar"></i> ${article.date}</span>
                <span><i class="far fa-clock"></i> ${article.readTime}</span>
              </div>
              <p class="article-excerpt">${article.excerpt}</p>
              <a href="javascript:void(0)" onclick="openArticleModal('${article.id}')" class="read-more-btn">
                <span data-i18n="blog.cta.readMore">${blogData.cta.readMore}</span>
                <i class="fas fa-arrow-right"></i>
              </a>
            </div>
          `).join('');
        }

        // Render news
        if (blogData.news && blogData.news.items && newsList) {
          newsList.innerHTML = blogData.news.items.map(newsItem => `
            <div class="news-item">
              <p class="font-semibold text-gray-800">${newsItem}</p>
            </div>
          `).join('');
        }
      }

      document.addEventListener("DOMContentLoaded", () => {
        // Apply i18n meta tags
        if (window.I18N) {
          const lang = localStorage.getItem("riskalia_lang") || "fr";
          const meta = window.I18N[lang].blog.meta;
          document.title = meta.title;
          document.querySelector('meta[name="description"]').setAttribute("content", meta.desc);
        }

        // Initial render
        renderBlogContent();

        // Listen for language changes
        document.addEventListener("languageChanged", (e) => {
          window.lang = e.detail.language;
          localStorage.setItem("riskalia_lang", window.lang);

          // Update meta tags
          const meta = window.I18N[window.lang].blog.meta;
          document.title = meta.title;
          document.querySelector('meta[name="description"]').setAttribute("content", meta.desc);

          // Apply translations
          if (typeof window.applyTexts === "function") window.applyTexts();

          // Update components
          window.navigationComponent?.updateTranslations?.();
          window.footerComponent?.updateTranslations?.();

          // Re-render blog content
          renderBlogContent();
        });

        // Initialize components
        if (typeof FooterComponent !== "undefined" && !window.footerComponent) {
          window.footerComponent = new FooterComponent();
        }
      });
    </script>
  </body>
</html>
